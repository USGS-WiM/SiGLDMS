<legend>Publications</legend>

<div class="form-group" ng-if="ProjPubs.length > 0">
    <table class="table">
        <thead><tr><th></th><th>Publication title</th><th>Publication description</th><th>Publication website/location</th></tr></thead>
        <tbody>
            <tr ng-repeat="p in ProjPubs">
                <td style="white-space: nowrap">
                    <!-- form -->
                    <form editable-form name="rowform" onaftersave="savePub($data, p.PUBLICATION_ID)" ng-show="rowform.$visible" class="form-buttons form-inline" shown="inserted == p">
                        <button type="submit" ng-disabled="rowform.$waiting" class="btn btn-primary">
                            save
                        </button>
                        <button type="button" ng-disabled="rowform.$waiting" ng-click="rowform.$cancel()" class="btn btn-default">
                            cancel
                        </button>
                    </form>
                    <div class="buttons" ng-show="!rowform.$visible">
                        <button class="btn btn-primary" ng-click="rowform.$show()">edit</button>
                        <button class="btn btn-danger" confirmed-click="RemovePub(p)" ng-confirm-click="Are you sure you want to remove this publication?">del</button>
                    </div>
                </td>
                <td>
                    <!--<div style="display:none"><span editable-text="p.PROJECT_ID" e-form="rowform" e-name="PROJECT_ID">{p.PROJECT_ID}}</span></div>-->
                    <span editable-text="p.TITLE" e-name="TITLE" e-form="rowform">{{ p.TITLE || '' }}</span>
                </td>
                <td>
                    <span editable-text="p.CITATION" e-name="CITATION" e-form="rowform">{{ p.CITATION || '' }}</span>
                </td>
                <td>
                    <span editable-text="p.URL" e-name="URL" e-form="rowform">{{ p.URL || '' }}</span>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<hr />

<form class="form-horizontal" name="projectForm.Pubs">
    <fieldset>
        <div>Add new publication</div>
        <!-- Publication Title -->
        <div class="form-group">
            <label class="col-md-2 control-label req" for="inputTITLE">Publication title:</label>
            <div class="col-md-4">
                <input class="form-control" id="inputTITLE" name="TITLE"
                       type="text" placeholder="" ng-required="!(newPub.TITLE.length || newPub.CITATION.length || newPub.URL.length)"
                       ng-model="newPub.TITLE" />
            </div>
        </div>

        <!-- Publication description -->
        <div class="form-group">
            <label class="col-md-2 control-label req" for="inputCITATION">Publication description:</label>
            <div class="col-md-4">
                <textarea class="form-control" id="inputCITATION" rows="3"
                          type="text" placeholder="" ng-required="!(newPub.TITLE.length || newPub.CITATION.length || newPub.URL.length)"
                          ng-model="newPub.CITATION" />
            </div>
        </div>

        <!-- Publication website/location -->
        <div class="form-group">
            <label class="col-md-2 control-label req" for="inputURL">Publication website/location:</label>
            <div class="col-md-4">
                <input class="form-control" id="inputURL" name="URL"
                       type="text" placeholder="" ng-required="!(newPub.TITLE.length || newPub.CITATION.length || newPub.URL.length)"
                       ng-model="newPub.URL" />
            </div>
        </div>

        <!--submit button-->
        <div class="form-group">
            <div class="col-md-4 col-md-offset-2">
                <span>
                    <button class="btn btn-primary"
                            style="width:80px;margin-right:10px"
                            ng-click="AddPub(projectForm.Pubs.$valid, newPub)">
                        Add
                    </button>
                </span>
            </div>
        </div>

    </fieldset>
</form>


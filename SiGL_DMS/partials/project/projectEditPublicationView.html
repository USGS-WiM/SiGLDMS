<legend>Publications</legend>

<div class="form-group" ng-if="ProjPubs.length > 0">
            <div class="publication-list-item" ng-repeat="p in ProjPubs">
                    <form editable-form name="rowform" onshow="EditRowClicked()" onhide="CancelEditRowClick()" onaftersave="savePub($data, p.PUBLICATION_ID)" ng-show="rowform.$visible" class="form-buttons form-inline" shown="inserted == p">
                        <button type="submit" ng-disabled="rowform.$waiting" class="btn btn-primary">
                            save
                        </button>
                        <button type="button" ng-disabled="rowform.$waiting" ng-click="rowform.$cancel()" class="btn btn-default">
                            cancel
                        </button>
                    </form>

                    <div style="display:none">
                        <span editable-text="p.PUBLICATION_ID" e-form="rowform" e-name="PUBLICATION_ID">{{p.PUBLICATION_ID}}</span>
                        <span editable-text="p.SCIENCE_BASE_ID" e-form="rowform" e-name="SCIENCE_BASE_ID">{{p.SCIENCE_BASE_ID}}</span>
                    </div>
                    <span class="publication-list-item-text" editable-text="p.TITLE" e-name="TITLE" e-form="rowform"><b>{{ p.TITLE || '' }}</b></span>

                    <span class="publication-list-item-text" editable-textarea="p.DESCRIPTION" e-rows="5" e-cols="40" e-name="DESCRIPTION" e-form="rowform">{{ p.DESCRIPTION || '' }}</span>

                    <span class="publication-list-item-text" editable-text="p.URL" e-name="URL" e-form="rowform">{{ p.URL || '' }}</span>

                  <div class="buttons" ng-show="!rowform.$visible">
                      <button class="btn btn-primary" ng-click="rowform.$show()">edit</button>
                      <button class="btn btn-danger" ng-click="RemovePub(p)">del</button>
                  </div>

              </div>

</div>
<hr />

<form class="form-horizontal" name="projectForm.Pubs">
    <fieldset ng-disabled="isEditing">
        <div class="subheader">Add New Publication</div>
        <!-- Publication Title -->
        <div class="form-group">
            <label class="col-md-4 control-label req" for="inputTITLE">
              Publication title:
              <span class="glyphicon glyphicon-question-sign" data-toggle="tooltip"
                    title="Enter the title of your publication in this field. Do not include any other information."
                    data-placement="right" tooltip>
              </span>
            </label>
            <div class="col-md-8">
                <input class="form-control" id="inputTITLE" name="TITLE"
                       type="text" placeholder="" ng-required="!(newPub.TITLE.length || newPub.DESCRIPTION.length || newPub.URL.length)"
                       ng-model="newPub.TITLE" />
            </div>&nbsp;

        </div>

        <!-- Publication description -->
        <div class="form-group">
            <label class="col-md-4 control-label req" for="inputDESCRIPTION">
              Publication description:
              <span class="glyphicon glyphicon-question-sign" data-toggle="tooltip"
                    title="Enter the citation or briefly describe the content and format of your publication."
                    data-placement="right" tooltip>
              </span>
            </label>
            <div class="col-md-8">
                <textarea class="form-control" id="inputDESCRIPTION" rows="3"
                          type="text" placeholder="" ng-required="!(newPub.TITLE.length || newPub.DESCRIPTION.length || newPub.URL.length)"
                          ng-model="newPub.DESCRIPTION" />
            </div>&nbsp;

        </div>

        <!-- Publication website/location -->
        <div class="form-group">
            <label class="col-md-4 control-label req" for="inputURL">
              Publication website / location:
              <span class="glyphicon glyphicon-question-sign" data-toggle="tooltip"
                    title="If the publication is online, enter the URL. Otherwise, provide information on how to obtain a copy of the publication."
                    data-placement="right" tooltip>
              </span>
            </label>
            <div class="col-md-8">
                <input class="form-control" id="inputURL" name="URL"
                       type="text" placeholder="" ng-required="!(newPub.TITLE.length || newPub.DESCRIPTION.length || newPub.URL.length)"
                       ng-model="newPub.URL" />
            </div>&nbsp;

        </div>

        <!--submit button-->
        <div class="form-group">
            <div class="col-md-4 col-md-offset-2">
                <span>
                    <button class="btn btn-primary"
                            style="width:80px;margin-right:10px"
                            ng-click="AddPub(projectForm.Pubs.$valid, newPub)">
                        Add
                    </button>
                </span>
            </div>
        </div>

    </fieldset>
</form>
